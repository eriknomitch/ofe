# ================================================
# OFE ============================================
# ================================================

# ------------------------------------------------
# MODULE->OFE ------------------------------------
# ------------------------------------------------
module Ofe

  # ----------------------------------------------
  # ATTRIBUTES -----------------------------------
  # ----------------------------------------------
  
  # ----------------------------------------------
  # UTILITY --------------------------------------
  # ----------------------------------------------
  def self.current_file_basename
    File.basename $0
  end
  
  # ----------------------------------------------
  # CONFIG-FILE ----------------------------------
  # ----------------------------------------------
  def self.config_file_filename
    "ofe.json"
  end

  def self.config_file_exists?
    File.exist? config_file_filename
  end

  def self.require_config_file
    return true if config_file_exists?

    raise "fatal: No config file found at ./#{config_file_filename}"
  end

  # ----------------------------------------------
  # TARGET ---------------------------------------
  # ----------------------------------------------
  def self.target
    target = :default
    target = ARGV.first.to_sym if ARGV.count > 0
    target
  end
  
  # ----------------------------------------------
  # FINDING --------------------------------------
  # ----------------------------------------------
  
  # ----------------------------------------------
  # OPENING --------------------------------------
  # ----------------------------------------------

  # ----------------------------------------------
  # MAIN -----------------------------------------
  # ----------------------------------------------
  def self.main()

    begin

      require_config_file

      puts target

    rescue => exception
      puts "#{current_file_basename}: #{exception}"
      exit 1
    end
  end
  
end

